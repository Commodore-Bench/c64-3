; Demo - Get a single keypress and print its code

            ;ACME 0.97
            !cpu 6510
            * = $c000

            !src <common/m-print.a>
            !src <common/kernal.a>
            !src <common/mem-map.a>


main:
            ; Keyboard buffer size
            lda #1
            sta XMAX

            ; No key repeat
            lda #$40
            sta RPTFLA

            ; Loop on keypress
-           jsr SCNKEY
            jsr GETIN
            beq -

            ; Print key code
            jsr print_hex
            +new_line

            jmp -

            !src <baseconv/print-hex.a>
