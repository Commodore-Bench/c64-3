; Demo - fill pages
;
; Fill default screen memory $0400-$07ff

        !cpu 6510
        !src <common/pseudo-reg.a>
        !src <mem/m-copy-u8-bytes.a>
        * = $c000

main:

; Save $07F8-$07FF (default sprite area) (8 bytes).
; They are located at the end of the last text screen
; page and will be erased by the fill page routine,
; therefore must be preserved.

        ;+copy_u8_bytes $07f8, .save_sprite_area, 8

; Fill screen memory

        lda #$04
        sta R2                  ; TEXT screen
        tax                     ; number of mem pages
        lda #0                  ; "@"
        jsr fill_pages

; Restore sprites

        ;+copy_u8_bytes .save_sprite_area, $07f8, 8

; Done
        rts

        !src <mem/fill-pages.a>

        !address .save_sprite_area = *
        !fill 8, 0
